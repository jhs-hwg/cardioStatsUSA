<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="NHANES design objects are the data structure used in
the cardioStatsUSA package for analysis of NHANES data."><title>Survey Design for NHANES Data — nhanes_design • cardioStatsUSA</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Survey Design for NHANES Data — nhanes_design"><meta property="og:description" content="NHANES design objects are the data structure used in
the cardioStatsUSA package for analysis of NHANES data."><meta property="og:image" content="https://jhs-hwg.github.io/cardioStatsUSA/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">cardioStatsUSA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-results">Results</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-results">
    <a class="dropdown-item" href="../articles/hypertension.html">Hypertension</a>
    <a class="dropdown-item" href="../articles/bp_meds.html">Antihypertensive medication use</a>
    <a class="dropdown-item" href="../articles/bp_control.html">Blood pressure control</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/cardioStatsUSA.html">Get started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-technical-stuff">Technical stuff</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-technical-stuff">
    <a class="dropdown-item" href="../reference/index.html">Documentation</a>
    <a class="dropdown-item" href="../articles/replicate_cdc_2017.html">Replicating NCHS Data Brief No. 289</a>
    <a class="dropdown-item" href="../articles/replicate_jama_2020.html">Replicating Muntner et al, 2020</a>
    <a class="dropdown-item" href="../articles/replicate_hypertension_2022.html">Replicating Muntner et al, 2022</a>
    <a class="dropdown-item" href="../articles/modules.html">Extending the application</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Survey Design for NHANES Data</h1>
      
      <div class="d-none name"><code>nhanes_design.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>NHANES design objects are the data structure used in
the <code>cardioStatsUSA</code> package for analysis of NHANES data.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">nhanes_design</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">key</span>,</span>
<span>  <span class="va">outcome_variable</span>,</span>
<span>  outcome_quantiles <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  group_variable <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  group_cut_n <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  group_cut_type <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stratify_variable <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  time_variable <span class="op">=</span> <span class="st">"svy_year"</span>,</span>
<span>  time_values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pool <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  run_checks <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>[data.frame]
A set of NHANES data with one row per survey participant and one column per variable. See <a href="nhanes_data.html">nhanes_data</a> for more details
See Details for specific requirements.
See <a href="nhanes_data.html">nhanes_data</a> for an example.</p></dd>


<dt>key</dt>
<dd><p>[data.frame]
A data set with one row per variable and with columns that describe the variable. See <a href="nhanes_key.html">nhanes_key</a> for more details
See Details for specific requirements.
See <a href="nhanes_key.html">nhanes_key</a> for an example.</p></dd>


<dt>outcome_variable</dt>
<dd><p>[character(1)]
The name of the outcome variable to be summarized.</p></dd>


<dt>outcome_quantiles</dt>
<dd><p>[numeric(1+)]
The quantiles to be summarized for a continuous outcome. The default is
<code>c(0.25, 0.50, 0.75)</code>. For example,</p><ul><li><p><code>outcome_quantiles = c(.5)</code> will compute the 50th percentile
(i.e., the median)</p></li>
<li><p><code>outcome_quantiles = c(.25, .5, .75)</code> will compute the 25th, 50th,
and 75th percentile.</p></li>
<li><p><code>outcome_quantiles = seq(.1, .9, by = .1)</code> will compute every 10th
percentile, except for the 0th and 100th</p></li>
</ul></dd>


<dt>group_variable</dt>
<dd><p>[character(1)]
The name of the group variable. See Details for a description of
the group variable and the stratify variable.</p></dd>


<dt>group_cut_n</dt>
<dd><p>[integer(1)]
The number of groups to form using the group variable. This is only
relevant if the group variable is continuous, and can be omitted.
Default is 3</p></dd>


<dt>group_cut_type</dt>
<dd><p>[character(1)]
The method used to create groups with the grouping variable. This is only
relevant i fthe group variable is continuous, and can be omitted.
Valid options are:</p><ul><li><p>"interval": equal interval width, e.g., three groups with ages of
0 to &lt;10, 10 to &lt;20, and 20 to &lt; 30 years.</p></li>
<li><p>"frequency": equal frequency, e.g., three groups with ages of
0 to &lt;q, q to &lt;p, and p to &lt;r, where q, p, and r are selected
so that roughly the same number of people are in each group.</p></li>
</ul></dd>


<dt>stratify_variable</dt>
<dd><p>[character(1)]
the name of the stratify variable. See Details for a description of
the group variable and the stratify variable.</p></dd>


<dt>time_variable</dt>
<dd><p>[character(1)]
The name of the time variable. The default, <code>svy_year</code>, corresponds to
the variable in <code>nhanes_data</code> that indicates which 2 year NHANES cycle
an observation was collected in.</p></dd>


<dt>time_values</dt>
<dd><p>[character(1+)]
The time values that will be included in this design object.
The default is to include all time values present in <code>data</code>.
Valid options are:</p><ul><li><p><code>'most_recent'</code>: includes the most recent time value.</p></li>
<li><p><code>'last_5'</code>: includes the 5 most recent time values.</p></li>
<li><p><code>'all'</code>: includes all time values present in <code>data</code>.</p></li>
<li><p>You can also give a vector of specific time values, e.g.,
<code>c("2009-2010", "2011-2012", "2013-2014")</code>, if these values are
present in the time_variable column (they are for <code>nhanes_data</code>).</p></li>
</ul></dd>


<dt>pool</dt>
<dd><p>[logical(1)]
If <code>FALSE</code> (the default), results are presented for individual times,
separately. If <code>TRUE</code>, data from each time value are pooled together.
Note that only contiguous cycles should be pooled together, e.g.,
using <code>pool = TRUE</code> with <code>time_values = 'last_5'</code> is okay, but
using <code>pool = TRUE</code> with <code>time_values = c("2009-2010", "2013-2014")</code> is
not recommended (that would be a strange result to interpret).</p></dd>


<dt>run_checks</dt>
<dd><p>[logical(1)]</p>
<p>If <code>TRUE</code> (the default), inputs will be checked for validity. If <code>FALSE</code>,
checks of inputs are skipped.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>an nhanes_design object.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    
<div class="section">
<h3 id="requirements-for-data">Requirements for data<a class="anchor" aria-label="anchor" href="#requirements-for-data"></a></h3>


<p><code>data</code> should include at a minimum the following variables:</p><ul><li><p><code>svy_weight_mec</code>: mobile examination center weights</p></li>
<li><p><code>svy_psu</code>: primary sampling unit</p></li>
<li><p><code>svy_strata</code>: strata</p></li>
<li><p><code>svy_year</code>: NHANES cycle</p></li>
</ul></div>

<div class="section">
<h3 id="requirements-for-key">Requirements for key<a class="anchor" aria-label="anchor" href="#requirements-for-key"></a></h3>


<p>The key data should have all of the required columns, and should not
have any column that is not listed below.</p><table class="table table"><tr><td>Column name</td><td>Column type</td><td>Is this column required?</td><td>The purpose of this column</td></tr><tr><td>class</td><td>character</td><td>TRUE</td><td>divide variables into classes</td></tr><tr><td>variable</td><td>character</td><td>TRUE</td><td>variable name in NHANES data</td></tr><tr><td>label</td><td>character</td><td>TRUE</td><td>label to present in results</td></tr><tr><td>source</td><td>character</td><td>FALSE</td><td>indicate where this variable is from</td></tr><tr><td>type</td><td>character</td><td>TRUE</td><td>variable type impacts summary results</td></tr><tr><td>outcome</td><td>logical</td><td>TRUE</td><td>indicate if variable is an outcome</td></tr><tr><td>group</td><td>logical</td><td>TRUE</td><td>indicate if variable is a grouper</td></tr><tr><td>subset</td><td>logical</td><td>TRUE</td><td>indicate if variable is a subsetter</td></tr><tr><td>stratify</td><td>logical</td><td>TRUE</td><td>indicate if variable is a stratifier</td></tr><tr><td>module</td><td>character</td><td>FALSE</td><td>indicate what module this variable belongs to</td></tr><tr><td>description</td><td>character</td><td>TRUE</td><td>describe the variable in detail</td></tr></table></div>

<div class="section">
<h3 id="group-and-stratify">Group and stratify<a class="anchor" aria-label="anchor" href="#group-and-stratify"></a></h3>


<p>The group variable and the stratify variable are both used to summarize
an outcome within subgroups. If the summary is returned as a table, then
the group and stratify variables can be considered interchangeable. If
the summary is returned as a plot, then the subgroups defined by the
group variable are shown on the same graph, while the subgroups defined
by the stratify variable are shown on different graphs (i.e., one graph
per strata). For example, if you wanted to estimate the race and sex
specific prevalence of hypertension with one graph for men and one
graphs for women, you would use <code>group = 'demo_race'</code> and
<code>stratify = 'demo_gender'</code></p>
</div>

    </div>
    <div class="section level2">
    <h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h2>
    <p></p><div class="sourceCode r"><pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jhs-hwg.github.io/cardioStatsUSA/">cardioStatsUSA</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/nhanes_design.html">nhanes_design</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">nhanes_data</span>,</span>
<span>                    key <span class="op">=</span> <span class="va">nhanes_key</span>, </span>
<span>                    time_values <span class="op">=</span> <span class="st">'most_recent'</span>,</span>
<span>                    outcome_variable <span class="op">=</span> <span class="st">'bp_sys_mean'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ------------------- NHANES design -------------------</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Outcome variable: bp_sys_mean</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="do">## - label: Systolic blood pressure (SBP), mm Hg</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="do">## - type: continuous</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="do">## - description: Mean systolic blood pressure in mm Hg.</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="do">##     This is based on the average of up to 3 readings.</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="do">##     Participants were required to have at least one</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="do">##     reading. Overall, &gt;95% of participants with at least</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="do">##     one systolic blood pressure reading had three</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="do">##     readings.  From 1999-2000 through 2015-2016, systolic</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="do">##     blood pressure was measured using a mercury</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="do">##     sphygmomanometer.  In 2017-2020, systolic blood</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="do">##     pressure was measured using an oscillometric device.</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="do">##     The systolic blood pressure in 2017-2020 was</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="do">##     calibrated to the mercury device by adding 1.5 mm Hg</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="do">##     to the mean measured oscillometric value.</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="do">## Group variable: None</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="do">## Stratify variable: None</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="do">## N observations</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="do">## - Unweighted: 8,965</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="do">## - Weighted: 247,835,696</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="do">## ------------------------------------------------------</span></span></code></pre><p></p></div>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Byron Jaeger, Ligong Chen, Paul Muntner.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

